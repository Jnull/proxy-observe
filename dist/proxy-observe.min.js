!function(){function e(e,t,r){function n(){s.callback&&(s.changeset.length>0&&(s.callback(s.changeset),s.changeset=[]),setTimeout(n,0))}var s=this;s.target=e,s.callback=t,s.acceptlist=r,s.changeset=[],e.__observerCallbacks__||(Object.defineProperty(e,"__observerCallbacks__",{enumerable:!1,configurable:!0,writable:!1,value:[]}),Object.defineProperty(e,"__observers__",{enumerable:!1,configurable:!0,writable:!1,value:[]})),e.__observerCallbacks__.push(t),e.__observers__.push(this);var c=new Proxy(e,s);return s.proxy=c,n(),c}!Object.observe&&Proxy&&(e.prototype.get=function(e,t){return"__observer__"===t?this:e[t]},e.prototype.set=function(e,t,r){var n=e[t],s=void 0===n?"add":"update";if(e[t]=r,!this.acceptlist||this.acceptlist.indexOf(s)>=0){var c={object:this.proxy,name:t,type:s};"update"===s&&(c.oldValue=n),this.changeset.push(c)}return!0},e.prototype.deleteProperty=function(e,t){var r=e[t];if(delete e[t],!this.acceptlist||this.acceptlist.indexOf("delete")>=0){var n={object:this.proxy,name:t,type:"delete",oldValue:r};this.changeset.push(n)}return!0},e.prototype.defineProperty=function(e,t,r){if(Object.defineProperty(e,t,r),!this.acceptlist||this.acceptlist.indexOf("reconfigure")>=0){var n={object:this.proxy,name:t,type:"reconfigure"};this.changeset.push(n)}return!0},e.prototype.setProtoypeOf=function(e,t){var r=Object.getPrototypeOf(e);if(Object.setPrototypeOf(e,t),!this.acceptlist||this.acceptlist.indexOf("setProtoype")>=0){var n={object:this.proxy,name:"__proto__",type:"setProtoype",oldValue:r};this.changeset.push(n)}return!0},e.prototype.preventExtensions=function(e){Object.getPrototypeOf(e);if(Object.preventExtensions(e),!this.acceptlist||this.acceptlist.indexOf("preventExtensions")>=0){var t={object:this.proxy,type:"preventExtensions"};this.changeset.push(t)}return!0},Object.observe=function(t,r,n){return new e(t,r,n)},Object.unobserve=function(e,t){e.__observerCallbacks__&&e.__observerCallbacks__.forEach(function(r,n){t===r&&(e.__observerCallbacks__.splice(n,1),delete e.__observers__[n].callback,e.__observers__.splice(n,1))})},Array.observe=function(e,t,r){var n=Object.observe(e,function(e){var r=[];e.forEach(function(e){"length"!==e.name&&"add"!==e.name&&r.push(e)}),r.length>0&&t(r)},r),s=e.splice;e.splice=function(e,t){var r=this.slice(e,t),c=arguments.length-1,o={object:n,type:"splice",index:e,removed:r,addedCount:c};s.apply(this,arguments),n.__observer__.changeset.push(o)};e.push;e.push=function(e){return this.splice(this.length-1,0,e)};e.pop;e.pop=function(){return this.splice(this.length-1,1)};e.unshift;e.unshift=function(e){return this.splice(0,0,e)};e.shift;return e.shift=function(){return this.splice(0,1)},n}),Object.deepObserve=function(e,t,r){r=r?r:[];var n=Object.keys(e);return e=Object.observe(e,function(e){var n=[];e.forEach(function(e){n.push({name:e.name,object:e.object,type:e.type,oldValue:e.oldValue,newValue:e.object[e.name],keypath:(r.length>0?r.join(".")+".":"")+e.name})}),t(n)}),n.forEach(function(n){if(e[n]instanceof Object){var s=r.slice(0);s.push(n),Object.deepObserve(e[n],t,s)}}),e}}();